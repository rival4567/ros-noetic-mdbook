<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Understanding ROS topics - ROS-Noetic-Tutorials</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../learn.html"><strong aria-hidden="true">1.</strong> Learn</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/main.html"><strong aria-hidden="true">1.1.</strong> ROS Basics with Turtlesim</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Workspace/main.html"><strong aria-hidden="true">1.1.1.</strong> ROS Workspace</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Workspace/create_a_catkin_workspace.html"><strong aria-hidden="true">1.1.1.1.</strong> Create a Catkin Workspace</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Package/main.html"><strong aria-hidden="true">1.1.2.</strong> ROS Package</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Package/create_a_ros_package.html"><strong aria-hidden="true">1.1.2.1.</strong> Create a ROS Package</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Nodes/main.html"><strong aria-hidden="true">1.1.3.</strong> ROS Nodes</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Nodes/create_a_ros_node.html"><strong aria-hidden="true">1.1.3.1.</strong> Create a ROS Node</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Nodes/command_rosrun.html"><strong aria-hidden="true">1.1.3.2.</strong> Command: rosrun</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Nodes/command_rosnode.html"><strong aria-hidden="true">1.1.3.3.</strong> Command: rosnode</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Master/main.html"><strong aria-hidden="true">1.1.4.</strong> ROS Master</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Parameter_Server/main.html"><strong aria-hidden="true">1.1.5.</strong> ROS Parameter Server</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Parameter_Server/load_parameters_using_yaml_file.html"><strong aria-hidden="true">1.1.5.1.</strong> Load Parameters using YAML file</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Parameter_Server/ros_node_to_get_and_set_parameters.html"><strong aria-hidden="true">1.1.5.2.</strong> Example #1: ROS Node to Get and Set Parameters</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Launch_Files/main.html"><strong aria-hidden="true">1.1.6.</strong> ROS Launch Files</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Launch_Files/create_a_ros_launch_file.html"><strong aria-hidden="true">1.1.6.1.</strong> Create a ROS Launch File</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Launch_Files/launch_two_ros_nodes.html"><strong aria-hidden="true">1.1.6.2.</strong> Example #1: Launch two ROS Nodes</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Launch_Files/launch_turtle_in_forest.html"><strong aria-hidden="true">1.1.6.3.</strong> Example #2: Launch Turtle in Forest</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Launch_Files/load_yaml.html"><strong aria-hidden="true">1.1.6.4.</strong> Example #3: Load YAML</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Launch_Files/launch_shell_script_and_ros_node.html"><strong aria-hidden="true">1.1.6.5.</strong> Example #4: Launch Shell Script and ROS Node</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/main.html"><strong aria-hidden="true">1.1.7.</strong> ROS Communication</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Topics/main.html"><strong aria-hidden="true">1.1.7.1.</strong> ROS Topics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Topics/command_rostopic/main.html"><strong aria-hidden="true">1.1.7.1.1.</strong> Command: rostopic</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Topics/command_rostopic/list.html"><strong aria-hidden="true">1.1.7.1.1.1.</strong> list</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Topics/command_rostopic/type_info_and_rosmsg.html"><strong aria-hidden="true">1.1.7.1.1.2.</strong> type, info and rosmsg</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Topics/command_rostopic/pub.html"><strong aria-hidden="true">1.1.7.1.1.3.</strong> pub</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Topics/command_rostopic/echo.html"><strong aria-hidden="true">1.1.7.1.1.4.</strong> echo</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Topics/pub_sub_with_custom_message.html"><strong aria-hidden="true">1.1.7.1.2.</strong> Example #1: Pub-Sub with Custom Message</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Services/main.html"><strong aria-hidden="true">1.1.7.2.</strong> ROS Services</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Services/create_a_srv_file.html"><strong aria-hidden="true">1.1.7.2.1.</strong> Create a srv file</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Services/test_ros_services_server_and_client.html"><strong aria-hidden="true">1.1.7.2.2.</strong> Test ROS Services - Server and Client</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Actions/main.html"><strong aria-hidden="true">1.1.7.3.</strong> ROS Actions</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Actions/create_a_action_message_file.html"><strong aria-hidden="true">1.1.7.3.1.</strong> Create an action message file</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Actions/simple_action_server_and_client.html"><strong aria-hidden="true">1.1.7.3.2.</strong> Simple Action Server &amp; Client</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Actions/action_server_and_client.html"><strong aria-hidden="true">1.1.7.3.3.</strong> Action Server &amp; Client</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_Communication/ROS_Actions/ros_actions_walkthrough_videos.html"><strong aria-hidden="true">1.1.7.3.4.</strong> ROS Actions Walkthrough Videos</a></li></ol></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_TF/main.html"><strong aria-hidden="true">1.1.8.</strong> ROS TF</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/ROS_TF/ros_tf_using_turtlesim.html"><strong aria-hidden="true">1.1.8.1.</strong> ROS tf using turtlesim</a></li></ol></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/Miscellaneous/main.html"><strong aria-hidden="true">1.1.9.</strong> Miscellaneous</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/Miscellaneous/rqt_graph.html"><strong aria-hidden="true">1.1.9.1.</strong> Rqt_graph</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/Miscellaneous/plot_juggler.html"><strong aria-hidden="true">1.1.9.2.</strong> Plot juggler</a></li><li class="chapter-item "><a href="../ROS_Basics_with_Turtlesim/Miscellaneous/ros_bags.html"><strong aria-hidden="true">1.1.9.3.</strong> ROS Bags</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../Additional_Sections/main.html"><strong aria-hidden="true">1.2.</strong> Additional Sections</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../Additional_Sections/configuring_your_ros_environment.html"><strong aria-hidden="true">1.2.1.</strong> Configuring your ROS environment</a></li><li class="chapter-item "><a href="../Additional_Sections/introducing_turtlesim_and_rqt.html"><strong aria-hidden="true">1.2.2.</strong> Introducing turtlesim and rqt</a></li><li class="chapter-item "><a href="../Additional_Sections/ros_nodes.html"><strong aria-hidden="true">1.2.3.</strong> Understanding ROS nodes</a></li><li class="chapter-item expanded "><a href="../Additional_Sections/ros_topics.html" class="active"><strong aria-hidden="true">1.2.4.</strong> Understanding ROS topics</a></li><li class="chapter-item "><a href="../Additional_Sections/ros_services.html"><strong aria-hidden="true">1.2.5.</strong> Understanding ROS services</a></li></ol></li></ol></li><li class="chapter-item "><a href="../tasks/main.html"><strong aria-hidden="true">2.</strong> Tasks</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../tasks/task0/main.html"><strong aria-hidden="true">2.1.</strong> Task0</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../tasks/task0/turtle-task.html"><strong aria-hidden="true">2.1.1.</strong> Problem Statement</a></li><li class="chapter-item "><a href="../tasks/task0/expected-output.html"><strong aria-hidden="true">2.1.2.</strong> Expected Output</a></li><li class="chapter-item "><a href="../tasks/task0/recording-logs.html"><strong aria-hidden="true">2.1.3.</strong> Recording Logs</a></li><li class="chapter-item "><a href="../tasks/task0/solution.html"><strong aria-hidden="true">2.1.4.</strong> Solution</a></li><li class="chapter-item "><a href="../tasks/task0/autoeval.html"><strong aria-hidden="true">2.1.5.</strong> Autoeval script</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">ROS-Noetic-Tutorials</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        

                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="understanding-ros-topics"><a class="header" href="#understanding-ros-topics">Understanding ROS topics</a></h1>
<p><strong>Goal</strong>: Use rqt_graph and command line tools to introspect ROS topics.</p>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p>ROS breaks complex systems down into many modular nodes. Topics are a vital element of the ROS graph that act as a bus for nodes to exchange messages.</p>
<p><img src="./Additional_Sections/topic-single-publisher-and-single-subscriber.gif" alt="topic-single-publisher-and-single-subscriber.gif" /></p>
<p>A node may publish data to any number of topics and simultaneously have subscriptions to any number of topics.</p>
<p><img src="./Additional_Sections/topic-multiple.gif" alt="topic-multiple.gif" /></p>
<p>Topics are one of the important ways that data moves between nodes, and therefore between different parts of the system.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>As always, don’t forget to source ROS 2 in every new terminal you open. Run <code>roscore</code> in a separate terminal.</p>
<h2 id="tasks"><a class="header" href="#tasks">Tasks</a></h2>
<h3 id="1-setup"><a class="header" href="#1-setup">1 Setup</a></h3>
<p>By now you should be comfortable starting up turtlesim.</p>
<p>Open a new terminal and run:</p>
<pre><code class="language-bash">rosrun turtlesim turtlesim_node
</code></pre>
<p>Open another terminal and run:</p>
<pre><code class="language-bash">rosrun turtlesim turtle_teleop_key
</code></pre>
<p>Recall from the [previous tutorial] that the names of these nodes are <code>/turtlesim</code> and <code>/teleop_turtle</code> by default.</p>
<h3 id="2-rqt_graph"><a class="header" href="#2-rqt_graph">2 rqt_graph</a></h3>
<p>Throughout this tutorial, we will use <code>rqt_graph</code> to visualize the changing nodes and topics, as well as the connections between them.</p>
<p>To run rqt_graph, open a new terminal and enter the command:</p>
<pre><code class="language-bash">rqt_graph
</code></pre>
<p>You can also open <code>rqt_graph</code> by opening rqt and selecting <strong>Plugins</strong> &gt; <strong>Introspection</strong> &gt; <strong>Nodes Graph</strong>.</p>
<p><img src="./Additional_Sections/rqt-graph-rostopic.png" alt="rqt-graph-rostopic.png" /></p>
<p>You should see the above nodes and topic. If you hover your mouse over the topic in the center, you’ll see the color highlighting like in the image above.</p>
<p>The graph is depicting how the <code>/turtlesim</code> node and the <code>/teleop_turtle</code> node are communicating with each other over a topic. The <code>/teleop_turtle</code> node is publishing data (the keystrokes you enter to move the turtle around) to the <code>/turtle1/cmd_vel</code> topic, and the <code>/turtlesim</code> node is subscribed to that topic to receive the data.</p>
<p>The highlighting feature of <strong>rqt_graph</strong> is very helpful when examining more complex systems with many nodes and topics connected in many different ways.</p>
<p><code>rqt_graph</code> is a graphical introspection tool. Now we’ll look at some command line tools for introspecting topics.</p>
<h3 id="rostopic-list"><a class="header" href="#rostopic-list">rostopic list</a></h3>
<p>Running the <code>rostopic list</code> command in a new terminal will return a list of all the topics currently active in the system:</p>
<pre><code class="language-bash">/rosout
/rosout_agg
/statistics
/turtle1/cmd_vel
/turtle1/color_sensor
/turtle1/pose
</code></pre>
<p>Topics have names and types. These attributes, particularly the type, are how nodes know they’re talking about the same information as it moves over topics. To show the topic type run this command:</p>
<pre><code class="language-bash">rostopic type /turtle1/cmd_vel 
</code></pre>
<pre><code class="language-bash">geometry_msgs/Twist
</code></pre>
<p>If you’re wondering where all these topics are in rqt_graph, you can uncheck all the boxes under Hide:</p>
<p><img src="./Additional_Sections/rqt-graph-unhidden.png" alt="rqt-graph-unhidden.png" /></p>
<p>For now, though, leave those options checked to avoid confusion.</p>
<h3 id="4-rostopic-echo"><a class="header" href="#4-rostopic-echo">4 rostopic echo</a></h3>
<p>To see the data being published on a topic, use:</p>
<pre><code class="language-bash">rostopic echo &lt;topic_name&gt;
</code></pre>
<p>Since we know that <code>/teleop_turtle</code> publishes data to <code>/turtlesim</code> over the <code>/turtle1/cmd_vel</code> topic, let’s use echo to introspect on that topic:</p>
<pre><code class="language-bash">rostopic echo /turtle1/cmd_vel
</code></pre>
<p>At first, this command won’t return any data. That’s because it’s waiting for <code>/teleop_turtle</code> to publish something.</p>
<p>Return to the terminal where <code>turtle_teleop_key</code> is running and use the arrows to move the turtle around. Watch the terminal where your <code>echo</code> is running at the same time, and you’ll see position data being published for every movement you make:</p>
<pre><code class="language-bash">linear: 
  x: 2.0
  y: 0.0
  z: 0.0
angular: 
  x: 0.0
  y: 0.0
  z: 0.0
---
</code></pre>
<p>Now return to rqt_graph and uncheck the Debug box.</p>
<p><img src="./Additional_Sections/rqt-graph-cli.png" alt="rqt-graph-cli.png" /></p>
<p><code>/rostopic_2309_1622187461192</code> is the node created by the <code>echo</code> we just ran (the number will change). Now you can see that the publisher is publishing data over the <code>cmd_vel</code> topic, and two subscribers are subscribed.</p>
<h3 id="5-rostopic-info"><a class="header" href="#5-rostopic-info">5 rostopic info</a></h3>
<p>Topics don’t have to only be point-to-point communication; it can be one-to-many, many-to-one, or many-to-many.</p>
<p>Another way to look at this is running:</p>
<pre><code class="language-bash">rostopic info /turtle1/cmd_vel
</code></pre>
<p>Which will return:</p>
<pre><code class="language-bash">Type: geometry_msgs/Twist

Publishers: 
 * /teleop_turtle (http://ros-noetic:44037/)

Subscribers: 
 * /turtlesim (http://ros-noetic:44297/)
 * /rostopic_2309_1622187461192 (http://ros-noetic:45255/)
</code></pre>
<h3 id="6-rosmsg-show"><a class="header" href="#6-rosmsg-show">6 rosmsg show</a></h3>
<p>Nodes send data over topics using messages. Publishers and subscribers must send and receive the same type of message to communicate.</p>
<p>The topic types we saw earlier after running <code>rostopic type &lt;topic-name&gt;</code> let us know what type of messages each topic can send. Recall that the <code>cmd_vel</code> topic has the type:</p>
<pre><code class="language-bash">geometry_msgs/Twist
</code></pre>
<p>This means that in the package <code>geometry_msgs</code> there is a message called <code>Twist</code>.</p>
<p>Now we can run `rosmsg show <type>.msg on this type to learn its details, specifically, what structure of data the message expects.</p>
<pre><code class="language-bash">rosmsg show geometry_msgs/Twist
</code></pre>
<pre><code class="language-bash">geometry_msgs/Vector3 linear
  float64 x
  float64 y
  float64 z
geometry_msgs/Vector3 angular
  float64 x
  float64 y
  float64 z
</code></pre>
<p>This tells you that the <code>/turtlesim</code> node is expecting a message with two vectors, <code>linear</code> and <code>angular</code>, of three elements each. If you recall the data we saw <code>/teleop_turtle</code> passing to <code>/turtlesim</code> with the <code>echo</code> command, it’s in the same structure:</p>
<pre><code class="language-bash">linear: 
  x: 2.0
  y: 0.0
  z: 0.0
angular: 
  x: 0.0
  y: 0.0
  z: 0.0
---
</code></pre>
<h3 id="rostopic-pub"><a class="header" href="#rostopic-pub">rostopic pub</a></h3>
<p>Now that you have the message structure, you can publish data onto a topic directly from the command line using:</p>
<pre><code class="language-bash">rostopic pub &lt;topic_name&gt; &lt;msg_type&gt; '&lt;args&gt;'
</code></pre>
<p>The <code>'&lt;args&gt;'</code> argument is the actual data you’ll pass to the topic, in the structure you just discovered in the previous section.</p>
<p>It’s important to note that this argument needs to be input in YAML syntax. Input the full command like so:</p>
<pre><code class="language-bash">rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist &quot;{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}&quot;
</code></pre>
<p><code>-1</code> is an optional argument meaning &quot;publish one message then exit&quot;.</p>
<p>You will receive the following message in the terminal:</p>
<pre><code class="language-bash">publishing and latching message for 3.0 seconds
</code></pre>
<p>And you will see your turtle move like so:</p>
<p><img src="./Additional_Sections/turtle1-rostopic-pub-once.png" alt="turtle1-rostopic-pub-once.png" /></p>
<p>The turtle (and commonly the real robots which it is meant to emulate) require a steady stream of commands to operate continuously. So, to get the turtle to keep moving, you can run:</p>
<pre><code class="language-bash">rostopic pub -r 1 /turtle1/cmd_vel geometry_msgs/Twist &quot;{linear: {x: 2.0, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 1.8}}&quot;
</code></pre>
<p>The difference here is the removal of the <code>-1</code> option and the addition of the <code>--rate 1</code> option, which tells <code>rostopic pub</code> to publish the command in a steady stream at 1 Hz.</p>
<p><img src="./Additional_Sections/turtle1-rostopic-pub.gif" alt="turtle1-rostopic-pub.gif" /></p>
<p>You can refresh <strong>rqt_graph</strong> to see what’s happening graphically. You will see the <code>rostopic pub ... </code> node (<code>/rostopic_3050_1622189437717</code>) is publishing over the <code>/turtle1/cmd_vel</code> topic, and is being received by both the <code>rostopic echo ... </code> node (<code>/rostopic_2309_1622187461192</code>) and the <code>/turtlesim node</code> now.</p>
<p><img src="./Additional_Sections/rqt_graph-pub.png" alt="rqt_graph-pub.png" /></p>
<p>Finally, you can run <code>echo</code> on the <code>pose</code> topic and recheck rqt_graph:</p>
<pre><code class="language-bash">rostopic echo /turtle1/pose
</code></pre>
<p><img src="./Additional_Sections/rqt_graph-echo-pose.png" alt="rqt_graph-echo-pose.png" /></p>
<p>In this case, <code>/turtlesim</code> is now publishing to the <code>pose</code> topic, and a new <code>echo</code> node is subscribed.</p>
<h3 id="8-rostopic-hz"><a class="header" href="#8-rostopic-hz">8 rostopic hz</a></h3>
<p>For one last introspection on this process, you can report the rate at which data is published using:</p>
<pre><code class="language-bash">rostopic hz /turtle1/pose 
</code></pre>
<p>It will return data on the rate at which the <code>/turtlesim</code> node is publishing data to the <code>pose</code> topic.</p>
<pre><code class="language-bash">average rate: 62.527
	min: 0.015s max: 0.017s std dev: 0.00041s window: 62
</code></pre>
<p>Recall that you set the rate of <code>turtle1/cmd_vel</code> to publish at a steady 1 Hz using <code>rostopic pub -r 1</code>. If you run the above command with <code>turtle1/cmd_vel</code> instead of <code>turtle1/pose</code>, you will see an average reflecting that rate.</p>
<h3 id="9-clean-up"><a class="header" href="#9-clean-up">9 Clean up</a></h3>
<p>At this point you’ll have a lot of nodes running. Don’t forget to stop them, either by closing the terminal windows or entering <code>Ctrl+C</code> in each terminal.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Nodes publish information over topics, which allows any number of other nodes to subscribe to and access that information. In this tutorial you examined the connections between several nodes over topics using rqt_graph and command line tools. You should now have a good idea of how data moves around a ROS system.</p>
<hr />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../Additional_Sections/ros_nodes.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../Additional_Sections/ros_services.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../Additional_Sections/ros_nodes.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../Additional_Sections/ros_services.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
